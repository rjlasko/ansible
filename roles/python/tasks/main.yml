---
## ---------------------------------------------------- ##
## Installs pyenv to manage and install Python versions ##
## ---------------------------------------------------- ##

# XXX: great tutorial see https://wilsonmar.github.io/pyenv/

- name: install pyenv
  ansible.builtin.include_tasks: pyenv_install.yml

- name: build & install python versions with pyenv
  ansible.builtin.include_tasks: python_build.yml

- name: set PyEnv global Python version(s)
  environment:
    PATH: "{{ pyenv_bin }}:{{ ansible_env.PATH }}"
  ansible.builtin.command: "pyenv global {{ pyenv_global_versions }}"
  changed_when: true

- name: configure pip
  include_role:
    name: pipx
    tasks_from: configure_pip
