---
## ---------------------------------------------------- ##
## Installs pyenv to manage and install Python versions ##
## ---------------------------------------------------- ##

# XXX: great tutorial see https://wilsonmar.github.io/pyenv/

- name: install pyenv
  ansible.builtin.include_tasks: pyenv_install.yml

- name: build/install/manage python versions with pyenv
  ansible.builtin.include_tasks: python_build.yml

- name: set global Python versions
  environment:
    PATH: "{{ python_pyenv_user_bin }}:{{ ansible_env.PATH }}"
  ansible.builtin.command: "pyenv global {{ python_global_versions }}"
  changed_when: true
