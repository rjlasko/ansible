---
## ---------------------------------------------------------------- ##
## Automates the installation and setup of libvirt hosts and guests ##
## ---------------------------------------------------------------- ##

- name: setup target as libvirt host
  when: libvirt.host is defined
  include_tasks: host.yml

# XXX: isolation is supplied for all guests simultaneously,
# which is why it isn't tied to the host or guest
- name: setup isolation
  include_tasks: isolate.yml

- name: setup targets as libvirt guests
  when: libvirt.vm is defined
  include_tasks: guest.yml
